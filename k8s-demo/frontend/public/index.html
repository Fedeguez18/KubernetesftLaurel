<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>K8s Demo - Frontend</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        background: linear-gradient(135deg, #0c2340 0%, #1a3a5c 50%, #2c5282 100%);
        min-height: 100vh;
        padding: 20px;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        position: relative;
        overflow-x: hidden;
        overflow-y: auto;
      }

      body::before {
        content: '';
        position: fixed;
        top: -50%;
        right: -50%;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle, rgba(49, 108, 229, 0.15) 0%, transparent 70%);
        animation: pulse 8s ease-in-out infinite;
        pointer-events: none;
      }

      @keyframes pulse {
        0%, 100% { transform: scale(1); opacity: 0.5; }
        50% { transform: scale(1.2); opacity: 0.3; }
      }

      .container {
        background: rgba(255, 255, 255, 0.98);
        border-radius: 24px;
        padding: 50px;
        max-width: 800px;
        width: 100%;
        box-shadow: 0 30px 90px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1);
        animation: fadeInUp 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        position: relative;
        z-index: 1;
        margin: 20px auto;
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .header {
        text-align: center;
        margin-bottom: 40px;
        position: relative;
      }

      .logo-container {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 20px;
        margin-bottom: 25px;
      }

      .logo {
        width: 60px;
        height: 60px;
        animation: float 3s ease-in-out infinite;
      }

      .logo.k8s {
        animation-delay: 0s;
      }

      .logo.docker {
        animation-delay: 0.5s;
      }

      .logo.postgres {
        animation-delay: 1s;
      }

      @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
      }

      h1 {
        color: #1a202c;
        font-size: 2.8em;
        margin-bottom: 12px;
        font-weight: 700;
        letter-spacing: -0.5px;
      }

      .subtitle {
        color: #4a5568;
        font-size: 1.15em;
        font-weight: 500;
      }

      .tech-badges {
        display: flex;
        justify-content: center;
        gap: 12px;
        margin-top: 20px;
        flex-wrap: wrap;
      }

      .badge {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 16px;
        border-radius: 12px;
        font-size: 0.9em;
        font-weight: 600;
        color: white;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        transition: all 0.3s ease;
      }

      .badge:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
      }

      .badge.k8s {
        background: linear-gradient(135deg, #326CE5 0%, #5088e8 100%);
      }

      .badge.docker {
        background: linear-gradient(135deg, #2496ED 0%, #4aaded 100%);
      }

      .badge.postgres {
        background: linear-gradient(135deg, #336791 0%, #4a7aa3 100%);
      }

      .form-container {
        background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
        border-radius: 20px;
        padding: 30px;
        margin-bottom: 35px;
        border: 2px solid rgba(49, 108, 229, 0.1);
      }

      #f {
        display: flex;
        gap: 12px;
      }

      #text {
        flex: 1;
        padding: 18px 24px;
        border: 2px solid #e2e8f0;
        border-radius: 14px;
        font-size: 1.05em;
        transition: all 0.3s ease;
        outline: none;
        background: white;
        color: #2d3748;
      }

      #text:focus {
        border-color: #326CE5;
        box-shadow: 0 0 0 4px rgba(49, 108, 229, 0.1);
        transform: translateY(-1px);
      }

      #text::placeholder {
        color: #a0aec0;
      }

      button {
        padding: 18px 36px;
        background: linear-gradient(135deg, #326CE5 0%, #2496ED 100%);
        color: white;
        border: none;
        border-radius: 14px;
        font-size: 1.05em;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        box-shadow: 0 8px 24px rgba(49, 108, 229, 0.35);
        letter-spacing: 0.3px;
      }

      button:hover {
        transform: translateY(-3px);
        box-shadow: 0 12px 32px rgba(49, 108, 229, 0.5);
      }

      button:active {
        transform: translateY(-1px);
      }

      .items-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 25px;
        padding-bottom: 15px;
        border-bottom: 3px solid #e2e8f0;
      }

      .items-title {
        color: #1a202c;
        font-size: 1.6em;
        font-weight: 700;
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .items-count {
        background: linear-gradient(135deg, #326CE5 0%, #2496ED 100%);
        color: white;
        padding: 8px 20px;
        border-radius: 16px;
        font-size: 1em;
        font-weight: 700;
        min-width: 50px;
        text-align: center;
        box-shadow: 0 4px 12px rgba(49, 108, 229, 0.3);
      }

      #items {
        list-style: none;
        max-height: 450px;
        overflow-y: auto;
        padding-right: 8px;
        margin-bottom: 20px;
      }

      #items::-webkit-scrollbar {
        width: 10px;
      }

      #items::-webkit-scrollbar-track {
        background: #edf2f7;
        border-radius: 10px;
      }

      #items::-webkit-scrollbar-thumb {
        background: linear-gradient(135deg, #326CE5 0%, #2496ED 100%);
        border-radius: 10px;
      }

      #items::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(135deg, #2557b8 0%, #1d7ec9 100%);
      }

      #items li {
        background: white;
        padding: 20px 24px;
        margin-bottom: 12px;
        border-radius: 14px;
        border-left: 5px solid #326CE5;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        animation: slideIn 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        display: flex;
        align-items: center;
        gap: 18px;
        transition: all 0.3s ease;
      }

      #items li:hover {
        transform: translateX(8px);
        box-shadow: 0 8px 20px rgba(49, 108, 229, 0.2);
        border-left-color: #2496ED;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateX(-30px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      .item-id {
        background: linear-gradient(135deg, #326CE5 0%, #2496ED 100%);
        color: white;
        padding: 8px 16px;
        border-radius: 10px;
        font-weight: 700;
        font-size: 0.95em;
        min-width: 50px;
        text-align: center;
        box-shadow: 0 4px 8px rgba(49, 108, 229, 0.25);
        letter-spacing: 0.5px;
      }

      .item-text {
        flex: 1;
        color: #2d3748;
        font-size: 1.05em;
        font-weight: 500;
        line-height: 1.5;
      }

      .loading {
        text-align: center;
        color: #718096;
        padding: 30px;
        font-style: italic;
        font-size: 1.1em;
      }

      .empty-state {
        text-align: center;
        padding: 50px 20px;
        color: #a0aec0;
      }

      .empty-state-icon {
        font-size: 4em;
        margin-bottom: 15px;
        animation: bounce 2s ease-in-out infinite;
      }

      @keyframes bounce {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-10px); }
      }

      .empty-state p {
        font-size: 1.1em;
        font-weight: 500;
      }

      .footer {
        text-align: center;
        margin-top: 30px;
        padding-top: 25px;
        border-top: 2px solid #e2e8f0;
        color: #718096;
        font-size: 0.95em;
        font-weight: 500;
      }

      .footer-tech {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 8px;
        flex-wrap: wrap;
      }

      @media (max-width: 768px) {
        .container {
          padding: 30px 20px;
        }

        h1 {
          font-size: 2em;
        }

        #f {
          flex-direction: column;
        }

        button {
          width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <div class="logo-container">
          <svg class="logo k8s" viewBox="0 0 256 249" xmlns="http://www.w3.org/2000/svg">
            <path d="M125.477.55C125.16.52 124.837.5 124.513.5c-.324 0-.647.02-.964.05L.55 123.477C.52 123.794.5 124.117.5 124.441c0 .324.02.647.05.964l122.927 122.927c.317.03.64.05.964.05.324 0 .647-.02.964-.05l122.927-122.927c.03-.317.05-.64.05-.964 0-.324-.02-.647-.05-.964L125.477.55z" fill="#326CE5"/>
            <path d="M128.38 32.55c-3.47-.32-6.97-.16-10.4.46-2.3.42-4.54 1.05-6.7 1.87-34.78 13.3-59.2 46.97-59.2 86.37 0 51.15 41.48 92.63 92.63 92.63s92.63-41.48 92.63-92.63c0-39.4-24.42-73.07-59.2-86.37-2.16-.82-4.4-1.45-6.7-1.87-3.43-.62-6.93-.78-10.4-.46-1.27.12-2.53.28-3.77.5-1.92.33-3.8.77-5.65 1.3-2.36.68-4.66 1.5-6.9 2.47-1.46.63-2.88 1.32-4.27 2.05-2.1 1.1-4.13 2.32-6.08 3.66-1.3.9-2.56 1.84-3.78 2.83l-1.03.84c-.33.27-.65.55-.97.83-.32.28-.63.57-.94.86-.15.15-.3.3-.45.45-.3.3-.6.61-.88.92-.15.15-.29.3-.43.46-.28.3-.56.6-.83.91-.13.15-.26.3-.39.45-.26.3-.52.6-.77.91-.12.15-.24.3-.36.45-.25.3-.49.61-.73.92-.11.15-.22.3-.33.46-.23.3-.46.62-.68.93-.1.15-.2.3-.3.46-.22.31-.43.63-.64.95-.09.15-.18.3-.27.45-.2.32-.4.64-.6.97-.08.15-.16.3-.24.44-.19.32-.37.65-.55.98-.07.14-.14.29-.21.43-.17.33-.34.66-.51 1-.06.14-.12.28-.18.42-.16.34-.31.68-.47 1.03-.05.13-.1.26-.15.4-.15.35-.29.7-.43 1.06-.04.13-.09.25-.13.38-.14.36-.27.72-.4 1.09-.04.12-.07.24-.11.36-.13.37-.25.75-.37 1.12-.03.12-.06.23-.09.35-.12.38-.23.77-.34 1.16-.03.11-.05.22-.08.33-.11.39-.21.79-.31 1.19-.02.11-.05.21-.07.32-.1.4-.19.81-.28 1.22-.02.1-.04.2-.06.3-.09.41-.17.83-.25 1.25-.02.1-.03.19-.05.29-.08.42-.15.85-.22 1.28-.01.09-.03.18-.04.27-.07.43-.13.87-.19 1.31-.01.09-.02.17-.03.26-.06.44-.11.89-.16 1.34 0 .08-.02.16-.02.24-.05.45-.09.91-.13 1.37 0 .08-.01.15-.02.23-.04.46-.07.93-.1 1.4 0 .07-.01.14-.01.21-.03.47-.05.95-.07 1.43 0 .07 0 .13-.01.2-.02.48-.03.97-.04 1.46 0 .06 0 .12 0 .19-.01.49-.01.99-.01 1.49v.37c0 .5.01 1 .02 1.49v.19c.01.49.03.98.04 1.46.01.07.01.13.01.2.02.48.04.96.07 1.43 0 .07.01.14.01.21.03.47.06.93.1 1.4.01.08.01.15.02.23.04.46.08.92.13 1.37.01.08.01.16.02.24.05.45.1.9.16 1.34.01.09.02.17.03.26.06.44.12.88.19 1.31.01.09.03.18.04.27.07.43.14.86.22 1.28.02.1.03.19.05.29.08.42.16.84.25 1.25.02.1.04.2.06.3.09.41.18.82.28 1.22.02.11.05.21.07.32.1.4.2.8.31 1.19.03.11.05.22.08.33.11.39.22.78.34 1.16.03.12.06.23.09.35.12.37.24.75.37 1.12.04.12.07.24.11.36.13.37.26.73.4 1.09.04.13.09.25.13.38.14.36.28.71.43 1.06.05.13.1.27.15.4.16.35.31.69.47 1.03.06.14.12.28.18.42.17.34.34.67.51 1 .07.14.14.29.21.43.18.33.36.66.55.98.08.14.16.29.24.44.2.33.4.65.6.97.09.15.18.3.27.45.21.32.42.64.64.95.1.16.2.31.3.46.22.31.45.62.68.93.11.15.22.31.33.46.24.31.48.61.73.92.12.15.24.3.36.45.26.3.51.61.77.91.13.15.26.3.39.45.27.31.55.61.83.91.14.16.28.31.43.46.29.31.58.62.88.92.15.15.3.3.45.45.31.29.62.58.94.86.32.28.64.56.97.83l1.03.84c1.22.99 2.48 1.93 3.78 2.83 1.95 1.34 3.98 2.56 6.08 3.66 1.39.73 2.81 1.42 4.27 2.05 2.24.97 4.54 1.79 6.9 2.47 1.85.53 3.73.97 5.65 1.3 1.24.22 2.5.38 3.77.5 3.47.32 6.97.16 10.4-.46 2.3-.42 4.54-1.05 6.7-1.87 34.78-13.3 59.2-46.97 59.2-86.37 0-51.15-41.48-92.63-92.63-92.63-1.97 0-3.93.06-5.87.18z" fill="#FFF"/>
          </svg>
          <svg class="logo docker" viewBox="0 0 256 185" xmlns="http://www.w3.org/2000/svg">
            <path d="M250.715 70.497c-5.765-4.053-19.011-5.608-29.148-3.698-2.363-16.88-13.158-31.46-29.779-44.23l-5.765-4.368-4.052 5.919c-8.026 11.842-11.421 30.221-9.689 44.857 1.283 9.686 5.764 19.062 12.632 26.458-5.138 2.863-13.044 6.863-24.654 6.553H.101l-.102.805c-1.169 10.808.854 49.292 26.67 77.985 19.441 21.607 48.592 32.582 86.68 32.582 82.421 0 143.5-38.035 172.073-107.122 11.27.282 35.498.568 48.01-23.816l.74-1.466-4.757-3.252" fill="#2496ED"/>
          </svg>
          <svg class="logo postgres" viewBox="0 0 256 264" xmlns="http://www.w3.org/2000/svg">
            <path d="M255.008 158.086c-1.535-4.649-5.556-7.887-10.756-8.664-2.452-.366-5.26-.21-8.583.475-5.792 1.195-10.089 1.65-13.225 1.738 11.837-19.985 21.462-42.775 27.003-64.228 8.96-34.689 4.172-50.492-1.423-57.64C233.217 10.847 211.614.683 185.552.372c-13.903-.17-26.108 2.575-32.475 4.549-5.928-1.046-12.302-1.63-18.99-1.738-12.537-.2-23.614 2.533-33.079 8.15-5.24-1.772-13.65-4.27-23.362-5.864-22.842-3.75-41.252-.828-54.718 8.685C6.622 25.672-.937 45.684.461 73.634c.444 8.874 5.408 35.874 13.224 61.48 4.492 14.718 9.282 26.94 14.237 36.33 7.027 13.315 14.546 21.156 22.987 23.972 4.731 1.576 13.327 2.68 22.368-4.85 1.146 1.388 2.675 2.767 4.704 4.048 2.577 1.625 5.728 2.953 8.875 3.74 11.341 2.835 21.964 2.126 31.027-1.848.056 1.612.099 3.152.135 4.482.06 2.157.12 4.272.199 6.25.537 13.374 1.447 23.773 4.143 31.049.148.4.347 1.01.557 1.657 1.345 4.118 3.594 11.012 9.316 16.411 5.925 5.593 13.092 7.308 19.656 7.308 3.292 0 6.433-.432 8.988-1.008 5.611-1.267 15.958-6.658 18.28-31.452 1.157-12.361 1.652-24.494 1.652-36.096V179.2c1.106.015 2.618.019 4.401.019 5.476 0 12.915-.117 20.654-.574 16.396--.971 24.752-2.702 30.817-5.487 3.675-1.688 7.095-3.855 10.049-6.42 2.1-1.823 3.941-3.896 5.427-6.077 4.073-5.99 6.173-13.44 6.173-21.996 0-3.096-.139-6.305-.415-9.534-.578-6.765-1.367-13.263-2.343-19.313 5.091-1.136 9.326-2.71 12.587-4.676 4.197-2.532 7.33-5.743 9.314-9.537 2.038-3.897 2.768-8.286 2.17-13.044-.583-4.625-2.097-9.08-4.512-13.241z" fill="#336791"/>
          </svg>
        </div>
        
        <h1>Kubernetes Demo</h1>
        <p class="subtitle">Sistema de gestión containerizado con orquestación</p>
        
        <div class="tech-badges">
          <span class="badge k8s"> Kubernetes</span>
          <span class="badge docker"> Docker</span>
          <span class="badge postgres"> PostgreSQL</span>
        </div>
      </div>

      <div class="form-container">
        <form id="f">
          <input id="text" placeholder="Escribe un nuevo ítem..." required />
          <button type="submit"> Agregar</button>
        </form>
      </div>

      <div class="items-header">
        <h2 class="items-title"> Ítems Almacenados</h2>
        <span class="items-count" id="count">0</span>
      </div>

      <ul id="items">
        <li class="loading"> Cargando datos desde PostgreSQL...</li>
      </ul>

      <div class="footer">
        <div class="footer-tech">
          <span>Desplegado en</span>
          <strong style="color: #326CE5;">Kubernetes</strong>
          <span>•</span>
          <span>Containerizado con</span>
          <strong style="color: #2496ED;">Docker</strong>
          <span>•</span>
          <span>Base de datos</span>
          <strong style="color: #336791;">PostgreSQL</strong>
        </div>
      </div>
    </div>

    <script>
      let itemCount = 0;

      async function load() {
        try {
          const res = await fetch('/api/items');
          const items = await res.json();
          const ul = document.getElementById('items');
          const countEl = document.getElementById('count');
          
          itemCount = items.length;
          countEl.textContent = itemCount;

          if (items.length === 0) {
            ul.innerHTML = `
              <div class="empty-state">
                <p>No hay ítems en la base de datos. ¡Agrega el primero!</p>
              </div>
            `;
          } else {
            ul.innerHTML = items.map(it => `
              <li>
                <span class="item-id">#${it.id}</span>
                <span class="item-text">${it.text}</span>
              </li>
            `).join('');
          }
        } catch (error) {
          console.error('Error al cargar:', error);
          document.getElementById('items').innerHTML = `
            <div class="empty-state">
              <p> Error al conectar con el backend</p>
            </div>
          `;
        }
      }

      document.getElementById('f').addEventListener('submit', async (e) => {
        e.preventDefault();
        const textInput = document.getElementById('text');
        const text = textInput.value.trim();
        
        if (!text) return;

        try {
          await fetch('/api/items', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ text })
          });
          
          textInput.value = '';
          await load();
        } catch (error) {
          console.error('Error al guardar:', error);
          alert('Error al guardar el ítem');
        }
      });

      load();
    </script>
  </body>
</html>